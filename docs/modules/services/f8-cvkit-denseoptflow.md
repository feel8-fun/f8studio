<!-- AUTO-GENERATED by scripts/generate_service_docs.py. DO NOT EDIT DIRECTLY. -->
# CVKit Dense Optical Flow (`f8.cvkit.denseoptflow`)

No description.

- Service class: `f8.cvkit.denseoptflow`
- Version: `0.0.1`
- Source directory: `f8/cvkit/dense_optflow`
- Tags: `cv`, `optical_flow`, `flow_field`

## How to Run

```bash
pixi run -e default python scripts/run_cpp_service.py --service-dir services/f8/cvkit/dense_optflow --exe f8cvkit_dense_optflow_service --env-var F8CVKIT_DENSE_OPTFLOW_EXE
```

- Workdir: `../../../../`
- Environment overrides: none

## Service State Fields

| Name | Access | Required | On Node | Schema | Description |
| --- | --- | --- | --- | --- | --- |
| `inputShmName` | `rw` | `false` | `true` | `string` | Input SHM name (e.g. shm.xxx.video). |
| `computeEveryNFrames` | `rw` | `false` | `true` | `integer / default=2` | Compute flow once per N new frames. |
| `sampleStepPx` | `rw` | `false` | `true` | `integer / default=16` | Grid sampling step in pixels for output vectors. |
| `minMag` | `rw` | `false` | `true` | `number / default=0.0` | Drop vectors with magnitude below this threshold. |
| `lastError` | `ro` | `false` | `true` | `string` | Last error message. |
| `active` | `rw` | `false` | `true` | `boolean / default=True` | Service lifecycle state (activate/deactivate). |
| `svcId` | `ro` | `false` | `false` | `string` | Readonly: current service instance id (svcId). |

## Service Commands

_None_

## Service Data Input Ports

_None_

## Service Data Output Ports

| Name | Required | On Node | Schema | Description |
| --- | --- | --- | --- | --- |
| `flowField` | `false` | `false` | `object{frameId, height, model, sampleStepPx, ...}` | Optical flow vectors in schema f8visionFlowField/1. |
| `telemetry` | `false` | `false` | `object{avgProcessMs, droppedFrames, failFrames, fps, ...}` | Runtime telemetry: fps/process time/vectors/failures. |

## Operators

_None_

## Usage Guide (Manual)

### Recommended Use Cases

- Motion field extraction for gesture/velocity-aware interactions.
- Preprocessing stage before higher-level temporal analytics.

### Minimal Run Example

```bash
pixi run -e default python scripts/run_cpp_service.py --service-dir services/f8/cvkit/dense_optflow --exe f8cvkit_dense_optflow_service --env-var F8CVKIT_DENSE_OPTFLOW_EXE
```

### Common Pitfalls

- Large frame sizes increase latency.
- Unstable input frame rates reduce flow quality.

### Troubleshooting

- Start with smaller resolutions.
- Confirm upstream frame source timestamps are monotonic.
