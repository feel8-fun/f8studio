<!-- AUTO-GENERATED by scripts/generate_service_docs.py. DO NOT EDIT DIRECTLY. -->
# Python Script Service (`f8.pyscript`)

Standalone python script runtime service with lifecycle/tick/command hooks.

- Service class: `f8.pyscript`
- Version: `0.0.1`
- Source directory: `f8/pyscript`
- Tags: `python`, `script`, `service`

## How to Run

```bash
pixi run f8pyscript
```

- Workdir: `../../../`
- Environment overrides: none

## Service State Fields

| Name | Access | Required | On Node | Schema | Description |
| --- | --- | --- | --- | --- | --- |
| `code` | `rw` | `false` | `false` | `string / default=# Hooks (all optional):<br># - onStart(ctx)<br># - onStop(ctx)<br># - onPause(ctx, meta=None)<br># - onResume(ctx, meta=None)<br># - onState(ctx, field, value, tsMs=None)<br># - onData(ctx, port, value, tsMs=None)<br># - onTick(ctx, tick)<br># - onCommand(ctx, name, args, meta=None)<br>#<br># Tick payload: {'seq': int, 'tsMs': int, 'deltaMs': int}<br># State read:<br># - await ctx['get_state'](field)                # freshest path<br># - ctx['get_state_cached'](field, default=None) # sync cached snapshot, may be stale<br># Permission: ctx['permission'] -> {'localExecGranted', 'expiresTsMs'}<br>#<br>def onStart(ctx):<br>    ctx['log']('pyscript started')<br><br>def onStop(ctx):<br>    ctx['log']('pyscript stopped')<br>` | Python source code. |
| `lastError` | `ro` | `false` | `false` | `string / default=` | Last script compile/runtime error. |
| `tickEnabled` | `rw` | `false` | `true` | `boolean / default=False` | Enable onTick scheduler. |
| `tickMs` | `rw` | `false` | `true` | `integer / default=100` | onTick interval in milliseconds. |
| `commands` | `rw` | `false` | `false` | `array[any]` | Optional UI command declaration list. |
| `localExecGranted` | `ro` | `false` | `true` | `boolean / default=False` | Readonly local execution grant state. |
| `localExecGrantTsMs` | `ro` | `false` | `false` | `integer / default=0` | Grant timestamp in milliseconds. |
| `execCount` | `ro` | `false` | `false` | `integer / default=0` | Total local exec invocations. |
| `lastExecTsMs` | `ro` | `false` | `false` | `integer / default=0` | Last local exec timestamp. |
| `active` | `rw` | `false` | `true` | `boolean / default=True` | Service lifecycle state (activate/deactivate). |
| `svcId` | `ro` | `false` | `false` | `string` | Readonly: current service instance id (svcId). |

## Service Commands

### `grant_local_exec`
Grant local execution for this script session.

- Show on node: `true`

| Param | Required | Schema | Description |
| --- | --- | --- | --- |
| `ttlMs` | `false` | `integer / default=60000` | Optional grant TTL in milliseconds. |

### `revoke_local_exec`
Revoke local execution grant.

- Show on node: `true`
- Params: none

### `restart_script`
Recompile and restart script.

- Show on node: `false`
- Params: none

### `status`
Get runtime status.

- Show on node: `false`
- Params: none

## Service Data Input Ports

| Name | Required | On Node | Schema | Description |
| --- | --- | --- | --- | --- |
| `in` | `true` | `true` | `any` | Default data input |

## Service Data Output Ports

| Name | Required | On Node | Schema | Description |
| --- | --- | --- | --- | --- |
| `out` | `true` | `true` | `any` | Default data output |

## Operators

_None_

## Usage Guide (Manual)

### Script Hooks

`f8.pyscript` provides one in-process script runtime per service instance.

Supported hooks:
- `onStart(ctx)` / `onStop(ctx)`
- `onPause(ctx, meta)` / `onResume(ctx, meta)`
- `onState(ctx, field, value, tsMs)`
- `onData(ctx, port, value, tsMs)`
- `onTick(ctx, tick)`
- `onCommand(ctx, name, args, meta)`

`ctx['exec_local'](...)` is gated by command `grant_local_exec` and can be revoked via `revoke_local_exec`.

State helpers:
- `await ctx['get_state'](field)` for freshest reads.
- `ctx['get_state_cached'](field, default=None)` for sync cached snapshots in hot paths.
