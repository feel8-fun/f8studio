<!-- AUTO-GENERATED by scripts/generate_service_docs.py. DO NOT EDIT DIRECTLY. -->
# DL TCN Wave (`f8.dl.tcnwave`)

ONNXRuntime temporal convolution wave inference service (port output).

- Service class: `f8.dl.tcnwave`
- Version: `0.0.1`
- Source directory: `f8/dl/tcnwave`
- Tags: `onnx`, `vision`, `temporal`, `wave`, `signal`

## How to Run

```bash
pixi run f8pydl_tcnwave
```

- Workdir: `../../../../`
- Environment overrides: none

## Service State Fields

| Name | Access | Required | On Node | Schema | Description |
| --- | --- | --- | --- | --- | --- |
| `shmName` | `rw` | `false` | `true` | `string / default=` | Video SHM mapping name (e.g. shm.implayer.video). |
| `weightsDir` | `rw` | `false` | `true` | `string / default=services/f8/dl/weights` | Directory containing *.yaml + *.onnx model files. |
| `modelId` | `rw` | `false` | `true` | `string / default=` | Model id selected from weightsDir (ignored if modelYamlPath is set). |
| `modelYamlPath` | `rw` | `false` | `false` | `string / default=` | Optional explicit model yaml path (overrides modelId). |
| `ortProvider` | `rw` | `false` | `true` | `string / enum[auto, cuda, cpu] / default=auto` | auto prefers CUDAExecutionProvider when available. |
| `autoDownloadWeights` | `rw` | `false` | `false` | `boolean / default=True` | When model file is missing, download from onnxUrl in model yaml. |
| `inferEveryN` | `rw` | `false` | `true` | `integer / default=1` | Run model inference every N frames (>=1). |
| `availableModels` | `ro` | `false` | `false` | `array[string]` | List of model ids discovered from weightsDir. |
| `loadedModel` | `ro` | `false` | `false` | `string / default=` | Current loaded model id/task. |
| `ortActiveProviders` | `ro` | `false` | `false` | `string / default=` | JSON list of active ONNX Runtime providers for this session. |
| `lastError` | `ro` | `false` | `false` | `string / default=` | Last runtime error string (best-effort). |
| `telemetryIntervalMs` | `wo` | `false` | `false` | `integer / default=1000` | Emit telemetry summaries every N milliseconds (0 disables). |
| `telemetryWindowMs` | `wo` | `false` | `false` | `integer / default=2000` | Rolling window for telemetry averages (ms). |
| `outputScale` | `rw` | `false` | `false` | `number / default=10.0` | Denormalization scale applied to raw model output values. |
| `outputBias` | `rw` | `false` | `false` | `number / default=0.0` | Denormalization bias applied after outputScale. |
| `useVrFocusCrop` | `rw` | `false` | `false` | `boolean / default=False` | Apply focus crop before inference. This assumes SHM already provides the target eye view and crops top 20% + left/right 10%. |
| `active` | `rw` | `false` | `true` | `boolean / default=True` | Service lifecycle state (activate/deactivate). |
| `svcId` | `ro` | `false` | `false` | `string` | Readonly: current service instance id (svcId). |

## Service Commands

_None_

## Service Data Input Ports

_None_

## Service Data Output Ports

| Name | Required | On Node | Schema | Description |
| --- | --- | --- | --- | --- |
| `predictedChange` | `true` | `true` | `number` | Temporal model output value per frame. |
| `telemetry` | `true` | `true` | `any` | Periodic telemetry summaries (fps + timings). |

## Operators

_None_

## Usage Guide (Manual)

### Recommended Use Cases

- Sequence-to-wave regression from motion feature windows.
- Producing scalar prediction streams for downstream control mapping.

### Minimal Run Example

```bash
pixi run -e onnx f8pydl_tcnwave
```

### Common Pitfalls

- Model input window length mismatch causes runtime validation errors.
- Wrong weights YAML path prevents ONNX session initialization.

### Troubleshooting

- Verify `weights` points to a valid config under `services/f8/dl/weights`.
- Check `predictedChange` output updates while input windows are arriving.
