<!-- AUTO-GENERATED by scripts/generate_service_docs.py. DO NOT EDIT DIRECTLY. -->
# Audio Feature Core (`f8.audiofeat.core`)

Audio SHM core feature extraction service (rms, onset, centroid).

- Service class: `f8.audiofeat.core`
- Version: `0.0.1`
- Source directory: `f8/audiofeat/core`
- Tags: `audio`, `feature`, `rms`, `onset`, `centroid`

## How to Run

```bash
pixi run f8pyaudiofeat_core
```

- Workdir: `../../../../`
- Environment overrides: none

## Service State Fields

| Name | Access | Required | On Node | Schema | Description |
| --- | --- | --- | --- | --- | --- |
| `audioShmName` | `rw` | `false` | `true` | `string / default=` | Audio SHM mapping name (e.g. shm.audiocap.audio). |
| `channelMode` | `rw` | `false` | `true` | `string / enum[mono_mix, left, right] / default=mono_mix` | Channel selection for analysis. |
| `windowMs` | `rw` | `false` | `true` | `integer / default=768` | Feature analysis window size in milliseconds. |
| `hopMs` | `rw` | `false` | `true` | `integer / default=64` | Feature analysis hop size in milliseconds. |
| `emitEveryHops` | `rw` | `false` | `true` | `integer / default=1` | Emit one coreFeatures payload every N analysis hops. |
| `lastError` | `ro` | `false` | `false` | `string / default=` | Last runtime error string. |
| `active` | `rw` | `false` | `true` | `boolean / default=True` | Service lifecycle state (activate/deactivate). |
| `svcId` | `ro` | `false` | `false` | `string` | Readonly: current service instance id (svcId). |

## Service Commands

_None_

## Service Data Input Ports

_None_

## Service Data Output Ports

| Name | Required | On Node | Schema | Description |
| --- | --- | --- | --- | --- |
| `coreFeatures` | `true` | `true` | `any` | Core feature payload with onset envelope history. |

## Operators

_None_

## Usage Guide (Manual)

### Recommended Use Cases

- Compute real-time base audio descriptors from `f8.audiocap` shared memory.
- Feed rhythm/beat services with reusable onset envelope features.

### Minimal Run Example

```bash
pixi run f8pyaudiofeat_core --service-id audiofeat_core
```

### Common Pitfalls

- `audioShmName` not set or pointing to a non-existing segment.
- Window/hop configuration too small can create unstable centroid/onset output.

### Troubleshooting

- Confirm upstream `f8.audiocap` reports non-zero `writeSeq`.
- Start with defaults (`windowMs=768`, `hopMs=64`) before tuning.
