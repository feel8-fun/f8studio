<!-- AUTO-GENERATED by scripts/generate_service_docs.py. DO NOT EDIT DIRECTLY. -->
# CVKit Video Stabilizer (`f8.cvkit.videostab`)

No description.

- Service class: `f8.cvkit.videostab`
- Version: `0.0.1`
- Source directory: `f8/cvkit/video_stab`
- Tags: `cv`, `stabilization`, `video`

## How to Run

```bash
pixi run -e default python scripts/run_cpp_service.py --service-dir services/f8/cvkit/video_stab --exe f8cvkit_video_stab_service --env-var F8CVKIT_VIDEO_STAB_EXE
```

- Workdir: `../../../../`
- Environment overrides: none

## Service State Fields

| Name | Access | Required | On Node | Schema | Description |
| --- | --- | --- | --- | --- | --- |
| `inputShmName` | `rw` | `false` | `true` | `string` | Input SHM name (e.g. shm.xxx.video). |
| `outputShmName` | `ro` | `false` | `true` | `string` | Output SHM name generated from serviceId. |
| `motionModel` | `rw` | `false` | `false` | `string / enum[affine, homography] / default=affine` | Global motion model used by stabilizer. |
| `stabilizationMode` | `rw` | `false` | `false` | `string / enum[trajectory, instant] / default=trajectory` | trajectory=smooth accumulated path; instant=smooth per-frame motion. |
| `smoothAlpha` | `rw` | `false` | `false` | `number / default=0.15` | EMA alpha used for motion smoothing. |
| `maxCornerCount` | `rw` | `false` | `false` | `integer / default=300` | LK feature count. |
| `qualityLevel` | `rw` | `false` | `false` | `number / default=0.01` | goodFeaturesToTrack quality level. |
| `minDistance` | `rw` | `false` | `false` | `number / default=8.0` | Minimum corner distance. |
| `ransacReprojThreshold` | `rw` | `false` | `false` | `number / default=3.0` | RANSAC reprojection threshold. |
| `resetOnFailureFrames` | `rw` | `false` | `false` | `integer / default=5` | Reset internal stabilizer state after N consecutive failures. |
| `lastError` | `ro` | `false` | `false` | `string` | Last error message. |
| `active` | `rw` | `false` | `true` | `boolean / default=True` | Service lifecycle state (activate/deactivate). |
| `svcId` | `ro` | `false` | `false` | `string` | Readonly: current service instance id (svcId). |

## Service Commands

### `resetStabilizer`
Reset internal trajectory/smoothing state.

- Show on node: `true`
- Params: none

## Service Data Input Ports

_None_

## Service Data Output Ports

| Name | Required | On Node | Schema | Description |
| --- | --- | --- | --- | --- |
| `motion` | `false` | `false` | `object{corrAngleDeg, corrScale, corrTx, corrTy, ...}` | Per-frame estimated and smoothed motion parameters. |
| `telemetry` | `false` | `false` | `object{avgProcessMs, droppedFrames, failFrames, fps, ...}` | Runtime telemetry: fps/process time/dropped/fail frames. |

## Operators

_None_

## Usage Guide (Manual)

### Recommended Use Cases

- Stabilize shaky input before detection and pose inference.
- Improve downstream consistency in handheld or moving-camera feeds.

### Minimal Run Example

```bash
pixi run -e default python scripts/run_cpp_service.py --service-dir services/f8/cvkit/video_stab --exe f8cvkit_video_stab_service --env-var F8CVKIT_VIDEO_STAB_EXE
```

### Common Pitfalls

- Over-aggressive settings can introduce lag artifacts.
- Scene cuts can break temporal assumptions.

### Troubleshooting

- Tune smoothing windows conservatively first.
- Reset state around hard scene transitions.
