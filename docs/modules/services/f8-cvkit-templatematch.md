<!-- AUTO-GENERATED by scripts/generate_service_docs.py. DO NOT EDIT DIRECTLY. -->
# CVKit Template Match (`f8.cvkit.templatematch`)

No description.

- Service class: `f8.cvkit.templatematch`
- Version: `0.0.1`
- Source directory: `f8/cvkit/template_match`
- Tags: `cv`, `template_match`

## How to Run

```bash
pixi run -e default python scripts/run_cpp_service.py --service-dir services/f8/cvkit/template_match --exe f8cvkit_template_match_service --env-var F8CVKIT_TEMPLATE_MATCH_EXE
```

- Workdir: `../../../../`
- Environment overrides: none

## Service State Fields

| Name | Access | Required | On Node | Schema | Description |
| --- | --- | --- | --- | --- | --- |
| `templateImagePngB64` | `rw` | `false` | `false` | `string` | PNG bytes encoded as base64. |
| `matchThreshold` | `rw` | `false` | `true` | `number / default=0.5` | 0..1 score threshold used to emit detections. |
| `matchingIntervalMs` | `rw` | `false` | `false` | `integer / default=200` | Minimum milliseconds between template matching passes. |
| `shmName` | `rw` | `false` | `true` | `string` | Optional SHM name override (e.g. shm.xxx.video). |
| `lastError` | `ro` | `false` | `false` | `string` | Last error message. |
| `active` | `rw` | `false` | `true` | `boolean / default=True` | Service lifecycle state (activate/deactivate). |
| `svcId` | `ro` | `false` | `false` | `string` | Readonly: current service instance id (svcId). |

## Service Commands

### `captureTemplateFrame`
Capture current SHM frame as an encoded image (base64).

- Show on node: `true`

| Param | Required | Schema | Description |
| --- | --- | --- | --- |
| `format` | `false` | `string` |  |
| `quality` | `false` | `integer` |  |
| `maxBytes` | `false` | `integer` |  |
| `maxWidth` | `false` | `integer` |  |
| `maxHeight` | `false` | `integer` |  |

### `ping`
Health check.

- Show on node: `false`
- Params: none

## Service Data Input Ports

_None_

## Service Data Output Ports

| Name | Required | On Node | Schema | Description |
| --- | --- | --- | --- | --- |
| `detections` | `false` | `true` | `object{detections, frameId, height, model, ...}` | Detection output in schema f8visionDetections/1 (single best match as 0/1 detection). |
| `telemetry` | `false` | `true` | `object{avgProcessMs, droppedFrames, fps, frameId, ...}` | Runtime telemetry: fps/process time/dropped frames. |

## Operators

_None_

## Usage Guide (Manual)

### Recommended Use Cases

- Fast region matching when target appearance is relatively stable.
- UI element or marker tracking in controlled scenes.

### Minimal Run Example

```bash
pixi run -e default python scripts/run_cpp_service.py --service-dir services/f8/cvkit/template_match --exe f8cvkit_template_match_service --env-var F8CVKIT_TEMPLATE_MATCH_EXE
```

### Common Pitfalls

- Poor template initialization leads to drift.
- Significant scale/rotation changes reduce matching confidence.

### Troubleshooting

- Reinitialize template when confidence drops.
- Restrict search area if scene context is known.
