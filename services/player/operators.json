[
  {
    "schemaVersion": "f8operator/1",
    "canonicalId": "fun.feel8.program.js-script",
    "label": "JS Script",
    "description": "Execute inline JavaScript on incoming data with stateful context.",
    "tags": [
      "program",
      "script"
    ],
    "state": [
      {
        "name": "body",
        "label": "Script Body",
        "description": "JavaScript to execute for each evaluation",
        "type": "string",
        "default": "function onData(inputs, state, context){\\n  return {outputs: inputs, state:{}, context:{}};\\n}\\n\\nmodule.exports = { onData };",
        "required": true,
        "access": "rw"
      }
    ],
    "allowAddState": true,
    "inPorts": [
      {
        "name": "in",
        "type": "float",
        "required": false
      }
    ],
    "outPorts": [
      {
        "name": "out",
        "type": "float",
        "required": false
      }
    ],
    "allowAddInPorts": true,
    "allowAddOutPorts": true,
    "allowAddCommands": true
  },
  {
    "schemaVersion": "f8operator/1",
    "canonicalId": "fun.feel8.comm.serialport-out",
    "label": "Serial Port",
    "description": "Send text payloads to a Web Serial device and manage connection lifecycle.",
    "tags": [
      "output",
      "serial"
    ],
    "state": [
      {
        "name": "serial.baudRate",
        "label": "Baud rate",
        "description": "Serial connection baud rate",
        "type": "int",
        "default": 115200,
        "required": false,
        "access": "rw",
        "minimum": 300,
        "maximum": 10000000,
        "step": 100
      },
      {
        "name": "serial.lineEnding",
        "label": "Line ending",
        "description": "Append newline characters to each payload before writing",
        "type": "enum",
        "enumValues": [
          "lf",
          "crlf",
          "none"
        ],
        "default": "lf",
        "required": false,
        "access": "rw"
      },
      {
        "name": "serialSeq",
        "label": "Sequence",
        "description": "Monotonic sequence number for outgoing writes",
        "type": "int",
        "default": 0,
        "required": false,
        "access": "rw",
        "showOnNode": false
      },
      {
        "name": "serialPayload",
        "label": "Payload",
        "description": "Last payload sent to the serial device",
        "type": "string",
        "default": "",
        "required": false,
        "access": "rw",
        "showOnNode": false
      }
    ],
    "allowAddState": false,
    "inPorts": [
      {
        "name": "text",
        "type": "string",
        "required": false
      }
    ],
    "outPorts": [],
    "allowAddInPorts": false,
    "allowAddOutPorts": false,
    "allowAddCommands": false,
    "commands": [
      {
        "name": "refreshDevices",
        "description": "Refresh available serial devices"
      },
      {
        "name": "connect",
        "description": "Connect to a selected serial device",
        "params": [
          {
            "name": "deviceId",
            "description": "Device identifier/path",
            "type": "string",
            "required": true
          },
          {
            "name": "baudRate",
            "description": "Override baud rate",
            "type": "int",
            "required": false
          }
        ]
      },
      {
        "name": "disconnect",
        "description": "Disconnect from the current device"
      }
    ],
    "rendererId": "f8/comm/serialport-out"
  }
]
