{
  "$id": "https://studio.feel8.fun/schemas/edge.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "F8EdgeSpec",
  "type": "object",
  "properties": {
    "from": {
      "type": "string",
      "description": "Source node id"
    },
    "fromPort": {
      "type": "string",
      "description": "Source port name"
    },
    "to": {
      "type": "string",
      "description": "Target node id"
    },
    "toPort": {
      "type": "string",
      "description": "Target port name"
    },
    "kind": {
      "title": "F8EdgeKindEmum",
      "type": "string",
      "enum": [
        "data",
        "state",
        "exec"
      ],
      "description": "Edge kind: data bus, state bus, or execution flow"
    },
    "scope": {
      "title": "F8EdgeScopeEnum",
      "type": "string",
      "enum": [
        "intra",
        "cross"
      ],
      "description": "intra = within one instance; cross = crosses instances"
    },
    "strategy": {
      "title": "F8EdgeStrategyEnum",
      "type": "string",
      "description": "Rate-mismatch handling strategy (only relevant for cross-instance data edges)",
      "enum": [
        "latest",
        "average",
        "hold",
        "repeat",
        "interpolate"
      ],
      "default": "latest"
    },
    "queueSize": {
      "type": "integer",
      "minimum": 1,
      "description": "Optional max queue size for this edge (data)"
    },
    "timeoutMs": {
      "type": "integer",
      "minimum": 0,
      "description": "Optional staleness timeout; drop-old beyond this age (data)"
    },
    "edgeId": {
      "type": "string",
      "description": "Stable id for an edge; required to pair cross-instance half-edges"
    },
    "direction": {
      "type": "string",
      "enum": [
        "out",
        "in"
      ],
      "description": "For cross-instance half-edges, indicates the local side: out=local is source/from, in=local is target/to"
    },
    "peerServiceId": {
      "type": "string",
      "description": "Remote service id for cross-instance half-edges"
    },
    "subject": {
      "type": "string",
      "description": "NATS subject used for this edge (recommended for cross-instance data half-edges)"
    }
  },
  "required": [
    "from",
    "fromPort",
    "to",
    "toPort",
    "kind",
    "scope"
  ],
  "additionalProperties": true
}
