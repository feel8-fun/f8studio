{
  "$id": "https://studio.feel8.fun/schemas/common.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "F8CommonDefinitions",
  "definitions": {
    "stateSpec": {
      "title": "F8StateSpec",
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "label": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "valueSchema": {
          "$ref": "./data.schema.json#/definitions/F8DataTypeSchema"
        },
        "access": {
          "title": "F8StateAccess",
          "type": "string",
          "enum": [
            "rw",
            "ro",
            "wo",
            "init"
          ],
          "description": "rw=mutable, ro=read-only, wo=write-only (no fanout), init=immutable in activation"
        },
        "required": {
          "type": "boolean",
          "default": false,
          "description": "If true, this state must be provided"
        },
        "uiControl": {
          "type": "string",
          "description": "Optional UI hint (slider, spinbox, select, etc.)"
        },
        "language": {
          "type": "string",
          "description": "Optional language hint for code editors (e.g., javascript, typescript)"
        },
        "showOnNode": {
          "type": "boolean",
          "default": false,
          "description": "If true, render this control inline on the node body; otherwise only in the inspector"
        }
      },
      "required": [
        "name",
        "valueSchema",
        "access"
      ],
      "additionalProperties": false
    },
    "dataPortSpec": {
      "title": "F8DataPortSpec",
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "valueSchema": {
          "$ref": "./data.schema.json#/definitions/F8DataTypeSchema"
        },
        "description": {
          "type": "string"
        },
        "required": {
          "type": "boolean",
          "default": true,
          "description": "Whether the port must be connected/provided"
        }
      },
      "required": [
        "name",
        "valueSchema"
      ],
      "additionalProperties": false
    },
    "commandSpec": {
      "title": "F8CommandSpec",
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "params": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/commandSpecParam"
          },
          "default": []
        }
      },
      "required": [
        "name"
      ],
      "additionalProperties": false
    },
    "commandSpecParam": {
      "title": "F8CommandSpecParam",
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "valueSchema": {
          "$ref": "./data.schema.json#/definitions/F8DataTypeSchema"
        },
        "required": {
          "type": "boolean",
          "default": false
        },
        "uiControl": {
          "type": "string",
          "description": "Optional UI hint (slider, select, etc.)"
        }
      },
      "required": [
        "name",
        "valueSchema"
      ],
      "additionalProperties": false
    }
  }
}
